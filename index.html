<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div id="header">
      <h1 id="head">Twittler</h1>
    </div>
    <div id='msgs'>
      
    </div>
    <script>

      // $(document).ready(function(){
      //   var $body = $('body');
      //   $body.html('');

        // var index = streams.home.length - 1;
        // while(index >= 0){
        //   var tweet = streams.home[index];
        //   var $tweet = $('<div></div>');
        //   $tweet.text('@' + tweet.user + ': ' + tweet.message);
        //   $tweet.appendTo($body);
        //   index -= 1;
        // }

      // });
      function msToTime(ms) {
        var ml = ms % 1000
        ms = (ms - ml) / 1000
        var s = ms % 60
        ms = (ms - s) / 60
        var min = ms % 60
        var hour = (ms - min) / 60
        return hour + ':' + min + ':' + s 
      }


      function update() {
      var index = streams.home.length - 1;
        $('#msgs div').remove();
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div class="tweet"></div>');
          var time = msToTime((new Date() - tweet.created_at))
          $tweet.text('@' + tweet.user + ': ' + tweet.message + ' ' + time);
          $('#msgs').append($tweet);
          index -= 1;
        }
      }
      update()
      setInterval(function() {
          update()
      }, 5000)
      
    </script>
  </body>
</html>
